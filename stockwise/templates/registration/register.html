{% extends "base.html" %}
{% load static %}

{% block title %}Register{% endblock %}

{% block content %}
<div class="w-full max-w-xl bg-surface bg-opacity-80 rounded-lg shadow-lg p-6 border border-primary mx-auto mt-2">
  <h2 class="text-2xl font-serif mb-2 text-primary text-center">User Registration</h2>
  <p class="text-secondary mb-4 text-center">Create a new account</p>

  <form method="POST" novalidate class="grid grid-cols-1 md:grid-cols-2 gap-4">
    {% csrf_token %}
    {% if form.non_field_errors %}
      <p class="md:col-span-2 text-red-500 text-sm">{{ form.non_field_errors.0 }}</p>
    {% endif %}

    <div>
      <label for="{{ form.username.id_for_label }}" class="block mb-1 text-secondary font-semibold">Username</label>
      <input
        type="text"
        name="{{ form.username.html_name }}"
        id="{{ form.username.id_for_label }}"
        value="{{ form.username.value|default_if_none:'' }}"
        class="w-full bg-surface text-secondary border border-primary rounded px-2 py-1.5 focus:outline-none focus:ring-2 focus:ring-primary"
      />
      {% if form.username.errors %}
        <p class="text-red-500 text-sm mt-1">{{ form.username.errors.0 }}</p>
      {% endif %}
    </div>

    <div>
      <label for="{{ form.first_name.id_for_label }}" class="block mb-1 text-secondary font-semibold">First Name</label>
      <input
        type="text"
        name="{{ form.first_name.html_name }}"
        id="{{ form.first_name.id_for_label }}"
        value="{{ form.first_name.value|default_if_none:'' }}"
        class="w-full bg-surface text-secondary border border-primary rounded px-2 py-1.5 focus:outline-none focus:ring-2 focus:ring-primary"
      />
      {% if form.first_name.errors %}
        <p class="text-red-500 text-sm mt-1">{{ form.first_name.errors.0 }}</p>
      {% endif %}
    </div>

    <div>
      <label for="{{ form.last_name.id_for_label }}" class="block mb-1 text-secondary font-semibold">Last Name</label>
      <input
        type="text"
        name="{{ form.last_name.html_name }}"
        id="{{ form.last_name.id_for_label }}"
        value="{{ form.last_name.value|default_if_none:'' }}"
        class="w-full bg-surface text-secondary border border-primary rounded px-2 py-1.5 focus:outline-none focus:ring-2 focus:ring-primary"
      />
      {% if form.last_name.errors %}
        <p class="text-red-500 text-sm mt-1">{{ form.last_name.errors.0 }}</p>
      {% endif %}
    </div>

    <div>
      <label for="{{ form.email.id_for_label }}" class="block mb-1 text-secondary font-semibold">Email</label>
      <input
        type="email"
        name="{{ form.email.html_name }}"
        id="{{ form.email.id_for_label }}"
        value="{{ form.email.value|default_if_none:'' }}"
        class="w-full bg-surface text-secondary border border-primary rounded px-2 py-1.5 focus:outline-none focus:ring-2 focus:ring-primary"
      />
      {% if form.email.errors %}
        <p class="text-red-500 text-sm mt-1">{{ form.email.errors.0 }}</p>
      {% endif %}
    </div>

    <div>
      <label for="{{ form.password1.id_for_label }}" class="block mb-1 text-secondary font-semibold">Password</label>
      <input
        type="password"
        name="{{ form.password1.html_name }}"
        id="{{ form.password1.id_for_label }}"
        class="w-full bg-surface text-secondary border border-primary rounded px-2 py-1.5 focus:outline-none focus:ring-2 focus:ring-primary"
      />
      {% if form.password1.errors %}
        <p class="text-red-500 text-sm mt-1">{{ form.password1.errors.0 }}</p>
      {% endif %}
    </div>

    <div>
      <label for="{{ form.password2.id_for_label }}" class="block mb-1 text-secondary font-semibold">Confirm Password</label>
      <input
        type="password"
        name="{{ form.password2.html_name }}"
        id="{{ form.password2.id_for_label }}"
        class="w-full bg-surface text-secondary border border-primary rounded px-2 py-1.5 focus:outline-none focus:ring-2 focus:ring-primary"
      />
      {% if form.password2.errors %}
        <p class="text-red-500 text-sm mt-1">{{ form.password2.errors.0 }}</p>
      {% endif %}
    </div>

    <div class="md:col-span-2">
      <label for="{{ form.user_type.id_for_label }}" class="block mb-1 text-secondary font-semibold">Role</label>
      <select
        name="{{ form.user_type.html_name }}"
        id="{{ form.user_type.id_for_label }}"
        class="w-full bg-surface text-secondary border border-primary rounded px-2 py-1.5 focus:outline-none focus:ring-2 focus:ring-primary"
      >
        {% for val, label in form.user_type.field.choices %}
          <option value="{{ val }}" {% if form.user_type.value == val|stringformat:"s" %}selected{% endif %}>{{ label }}</option>
        {% endfor %}
      </select>
      {% if form.user_type.errors %}
        <p class="text-red-500 text-sm mt-1">{{ form.user_type.errors.0 }}</p>
      {% endif %}
    </div>

    <div class="md:col-span-2">
      <button type="submit" class="w-full bg-primary text-secondary py-2 rounded hover:bg-secondary hover:text-primary transition">
        Register
      </button>
    </div>
  </form>
</div>
{% endblock %}