{% extends 'base.html' %}

{% block title %}Pending Offers{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto p-6 bg-surface border border-primary rounded-xl shadow-md">
  <h1 class="text-3xl font-bold mb-6 text-primary text-center">Pending Offers</h1>

  <form method="get" class="mb-4 flex gap-2 items-center">
    <select name="status" class="px-3 py-2 border border-muted rounded">
      <option value="">All Status</option>
      <option value="Pending" {% if status_filter == 'Pending' %}selected{% endif %}>Pending</option>
      <option value="Accepted" {% if status_filter == 'Accepted' %}selected{% endif %}>Accepted</option>
      <option value="Rejected" {% if status_filter == 'Rejected' %}selected{% endif %}>Rejected</option>
    </select>
    <button type="submit" class="bg-primary text-surface font-semibold px-4 py-2 rounded">Filter</button>
  </form>

  <div class="space-y-4">
    {% for offer in offers %}
    <div class="border border-muted rounded-lg p-4 bg-surface flex justify-between items-center">
      <div>
        <p><strong>Offer ID:</strong> {{ offer.offer_id }}</p>
        <p><strong>Date:</strong> {{ offer.offer_date }}</p>
        <p><strong>Status:</strong> {{ offer.offer_status }}</p>
        <p><strong>Unit Price:</strong> {{ offer.unit_price }}</p>
        <p><strong>Quantity per Price:</strong> {{ offer.quantity_per_price }}</p>
        <p><strong>Total Quantity:</strong> {{ offer.total_quantity }}</p>
      </div>

      {% if offer.offer_status == 'Pending' %}
      <form method="post" class="flex flex-col gap-2">
        {% csrf_token %}
        <input type="hidden" name="offer_id" value="{{ offer.offer_id }}">
        <button name="action" value="accept" class="bg-green-500 text-white font-semibold px-4 py-2 rounded hover:bg-green-600">Approve</button>
        <button name="action" value="reject" class="bg-red-500 text-white font-semibold px-4 py-2 rounded hover:bg-red-600">Reject</button>
      </form>
      {% else %}
      <p class="font-semibold text-muted">No actions available</p>
      {% endif %}
    </div>
    {% empty %}
    <p class="text-muted text-center">No offers found.</p>
    {% endfor %}
  </div>
</div>
{% endblock %}
